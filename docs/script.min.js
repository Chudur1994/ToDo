"use strict";function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var o=0;o<t.length;o++){var d=t[o];d.enumerable=d.enumerable||!1,d.configurable=!0,"value"in d&&(d.writable=!0),Object.defineProperty(e,d.key,d)}}function _createClass(e,t,o){return t&&_defineProperties(e.prototype,t),o&&_defineProperties(e,o),e}var todosArray=[{id:"000",text:"Find a job.",due:"Now",complete:!1},{id:"111",text:"Breathe every other second.",due:"Tomorrow",complete:!1},{id:"222",text:"Buy cat food.",due:"11/5/18 @ 2pm",complete:!1}],Todo=function(){function o(e,t){_classCallCheck(this,o),this.id=Date.now(),this.text=e,this.due=t,this.complete=!1}return _createClass(o,[{key:"save",value:function(){todosArray.push(this)}}],[{key:"getLastTodo",value:function(){return!(todosArray.length<1)&&todosArray[todosArray.length-1]}},{key:"removeTodo",value:function(t){var e=todosArray.findIndex(function(e){return e.id===t});if(-1===e)return!1;todosArray.splice(e,1)}},{key:"getAllTodos",value:function(){return todosArray}}]),o}(),openAddBtn=document.querySelector(".add-btn"),addContainer=document.querySelector(".add"),confirmAdd=document.querySelector(".confirm-btn"),sortBtn=document.querySelector(".sort-btn"),sortOptions=document.querySelector(".sort-options"),sortDate=document.querySelector(".sort-date"),sortDuration=document.querySelector(".sort-duration"),addInput=document.querySelector("#add-input"),addSettings=document.querySelector(".add-settings"),dueDateLabel=document.querySelector(".add-settings label"),dueDatePicker=document.querySelector(".add-settings input#due-date"),todosOverlay=document.querySelector(".todos .overlay"),messageModal=document.querySelector("#messageModal"),todoContainer=document.querySelector(".todos"),todos=document.querySelectorAll(".todo");function init(){Todo.getAllTodos().forEach(function(e){todoContainer.appendChild(makeTodoEl(e))})}function handleEnterKey(e){"13"==e.keyCode&&(inputIsValid()?(addTodo(),updateUI("add")):invalidInput("Input is empty."))}function addTodo(){var e=new Todo(addInput.value,dueDatePicker.value);e.save(),addInput.value="",todoContainer.appendChild(makeTodoEl(e)),console.log(Todo.getAllTodos())}function updateUI(e){switch(e){case"add":addContainer.classList.remove("show"),confirmAdd.classList.remove("show"),todosOverlay.classList.remove("show"),openAddBtn.classList.remove("hide");break;case"openAdd":addContainer.classList.add("show"),confirmAdd.classList.add("show"),openAddBtn.classList.add("hide"),todosOverlay.classList.add("show")}}function invalidInput(e){messageModal.textContent=e,messageModal.classList.add("show"),setTimeout(function(){messageModal.classList.remove("show")},1500)}function inputIsValid(){return""!=addInput.value&&""!=dueDatePicker.value}function makeTodoEl(t){var e=document.createElement("div");e.classList.add("todo");var o=document.createElement("p");o.classList.add("todo-text"),o.textContent=t.text;var d=document.createElement("span");d.classList.add("date-time"),d.textContent=t.due;var n=document.createElement("p");n.classList.add("todo-due"),n.textContent="Due: ",n.appendChild(d);var a=document.createElement("div");a.classList.add("controls");var s=document.createElement("span");s.classList.add("edit-todo"),s.textContent="Edit";var r=document.createElement("span");r.classList.add("delete-todo"),r.textContent="Delete",a.appendChild(s),a.appendChild(r);var i=document.createElement("span");return i.classList.add("overlay"),e.appendChild(o),e.appendChild(n),e.appendChild(a),e.appendChild(i),e.addEventListener("click",function(e){e.preventDefault(),todoClickHandler(this)}),e.addEventListener("mouseenter",function(e){e.preventDefault(),todoMouseEnterHandler(this,t)}),e.addEventListener("mouseleave",function(e){e.preventDefault(),todoMouseLeaveHandler(this)}),s.addEventListener("click",function(e){e.preventDefault(),editHandler(t)}),r.addEventListener("click",function(e){e.preventDefault(),deleteHandler(t)}),e}function deleteHandler(e){Todo.removeTodo(e.id),todoContainer.innerHTML="",Todo.getAllTodos().forEach(function(e){todoContainer.appendChild(makeTodoEl(e))})}function editHandler(e){console.log(e)}function todoClickHandler(e){document.querySelectorAll(".todo").forEach(function(e){e.classList.remove("selected")}),e.classList.add("selected"),e.querySelector(".overlay").classList.add("show"),e.querySelector(".controls").classList.add("show")}function todoMouseEnterHandler(e,t){e.classList.contains("selected")&&(e.querySelector(".overlay").classList.add("show"),e.querySelector(".controls").classList.add("show"))}function todoMouseLeaveHandler(e){e.classList.contains("selected")&&(e.querySelector(".overlay").classList.remove("show"),e.querySelector(".controls").classList.remove("show"))}init(),sortBtn.addEventListener("click",function(e){e.preventDefault(),sortOptions.classList.toggle("show")}),openAddBtn.addEventListener("click",function(e){e.preventDefault(),updateUI("openAdd"),addInput.focus()}),confirmAdd.addEventListener("click",function(e){e.preventDefault(),inputIsValid()?(addTodo(),updateUI("add")):invalidInput("Input is empty.")}),window.addEventListener("click",function(e){e.preventDefault(),e.target!==addInput&&e.target!==addSettings&&e.target!==dueDateLabel&&e.target!==dueDatePicker&&e.target!==openAddBtn&&e.target!==confirmAdd&&updateUI("add"),e.target!==sortBtn&&e.target!==sortDate&&e.target!==sortDuration&&sortOptions.classList.remove("show")}),sortDate.addEventListener("click",function(e){sortOptions.classList.remove("show"),this.classList.add("active"),sortDuration.classList.remove("active")}),sortDuration.addEventListener("click",function(e){sortOptions.classList.remove("show"),this.classList.add("active"),sortDate.classList.remove("active")}),addInput.addEventListener("keydown",function(e){handleEnterKey(e)}),dueDatePicker.addEventListener("keydown",function(e){handleEnterKey(e)});